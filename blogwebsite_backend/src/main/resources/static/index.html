<!--<!DOCTYPE html>-->
<!--<html>-->
<!--<head>-->
<!--    <title>Blog List</title>-->
<!--    <style>-->
<!--        body {-->
<!--          font-family: Arial;-->
<!--          background: #f4f4f4;-->
<!--          margin: 0;-->
<!--          padding: 20px;-->
<!--        }-->

<!--        .main-container {-->
<!--          display: flex;-->
<!--          justify-content: space-between;-->
<!--          align-items: flex-start;-->
<!--        }-->

<!--        .left-section {-->
<!--          flex: 3;-->
<!--        }-->

<!--        .right-section {-->
<!--          flex: 1;-->
<!--          padding-left: 30px;-->
<!--        }-->

<!--        h1 {-->
<!--          text-align: center;-->
<!--        }-->

<!--        .search-container {-->
<!--          margin-bottom: 20px;-->
<!--          text-align: center;-->
<!--        }-->

<!--        input[type="text"] {-->
<!--          padding: 10px;-->
<!--          width: 300px;-->
<!--          font-size: 16px;-->
<!--        }-->

<!--        .blog-grid {-->
<!--          display: flex;-->
<!--          flex-wrap: wrap;-->
<!--          justify-content: center;-->
<!--          gap: 20px;-->
<!--        }-->

<!--        .card {-->
<!--          background: white;-->
<!--          padding: 20px;-->
<!--          border-radius: 10px;-->
<!--          box-shadow: 0 2px 8px rgba(0,0,0,0.1);-->
<!--          width: 250px;-->
<!--          text-align: left;-->
<!--          cursor: pointer;-->
<!--        }-->

<!--        .card h3 {-->
<!--          margin: 0;-->
<!--        }-->

<!--        .action-box {-->
<!--          background: #fff;-->
<!--          padding: 20px;-->
<!--          border-radius: 10px;-->
<!--          box-shadow: 0 2px 8px rgba(0,0,0,0.1);-->
<!--          text-align: center;-->
<!--        }-->

<!--        .action-box button {-->
<!--          background-color: #4B0082;-->
<!--          color: white;-->
<!--          padding: 10px 20px;-->
<!--          border: none;-->
<!--          border-radius: 5px;-->
<!--          font-size: 16px;-->
<!--          cursor: pointer;-->
<!--        }-->

<!--        .action-box p {-->
<!--          margin-bottom: 15px;-->
<!--        }-->
<!--    </style>-->
<!--</head>-->
<!--<body>-->

<!--<h1>All Blogs</h1>-->

<!--<div class="main-container">-->

<!--    &lt;!&ndash; Left Side: Blogs &ndash;&gt;-->
<!--    <div class="left-section">-->
<!--        <div class="search-container">-->
<!--            <input type="text" id="searchInput" placeholder="Search by title..." onkeyup="filterBlogs()">-->
<!--        </div>-->

<!--        <div class="blog-grid" id="blogGrid">-->
<!--            &lt;!&ndash; Blog cards injected here &ndash;&gt;-->
<!--        </div>-->
<!--    </div>-->

<!--    &lt;!&ndash; Right Side: Create Blog / Login &ndash;&gt;-->
<!--    <div class="right-section">-->
<!--        <div class="action-box" id="actionBox">-->
<!--            &lt;!&ndash; Filled by JS &ndash;&gt;-->
<!--        </div>-->
<!--    </div>-->

<!--</div>-->

<!--<script>-->
<!--    let blogs = [];-->

<!--    async function loadBlogs() {-->
<!--      const res = await fetch("http://localhost:9090/getallblogs");-->
<!--      blogs = await res.json();-->
<!--      displayBlogs(blogs);-->
<!--    }-->

<!--    function displayBlogs(list) {-->
<!--      const grid = document.getElementById("blogGrid");-->
<!--      grid.innerHTML = "";-->
<!--      list.forEach(blog => {-->
<!--        const card = document.createElement("div");-->
<!--        card.className = "card";-->
<!--        card.onclick = () => {-->
<!--          window.location.href = `/blog_view.html?title=${encodeURIComponent(blog.title)}`;-->
<!--        };-->
<!--        card.innerHTML = `-->
<!--          <h3><b>${blog.title}</b></h3>-->
<!--          <p>${blog.content.slice(0, 60)}...</p>-->
<!--          <p style="color: gray">${blog.blog_words}</p>-->
<!--          <small>blog by ${blog.name}</small>-->
<!--        `;-->
<!--        grid.appendChild(card);-->
<!--      });-->
<!--    }-->

<!--    function filterBlogs() {-->
<!--      const input = document.getElementById("searchInput").value.toLowerCase();-->
<!--      const filtered = blogs.filter(blog => blog.title.toLowerCase().includes(input));-->
<!--      displayBlogs(filtered);-->
<!--    }-->

<!--    function setupActionBox() {-->
<!--      const email = sessionStorage.getItem('userEmail');-->
<!--      const actionBox = document.getElementById("actionBox");-->

<!--      if (email) {-->
<!--        actionBox.innerHTML = `-->
<!--          <p>Welcome, <b>${email}</b></p>-->
<!--          <button onclick="window.location.href='blog_add.html'">Create Blog</button>-->
<!--        `;-->
<!--      } else {-->
<!--        actionBox.innerHTML = `-->
<!--          <p>To create your own blogs</p>-->
<!--          <button onclick="window.location.href='login.html'">Login</button>-->
<!--        `;-->
<!--      }-->
<!--    }-->

<!--    loadBlogs();-->
<!--    setupActionBox();-->
<!--</script>-->
<!--</body>-->
<!--</html>-->

<!--ok-->

<!--<!DOCTYPE html>-->
<!--<html>-->
<!--<head>-->
<!--    <title>Blog List</title>-->
<!--    <style>-->
<!--        body {-->
<!--          font-family: Arial;-->
<!--          background: #f4f4f4;-->
<!--          margin: 0;-->
<!--          padding: 20px;-->
<!--        }-->

<!--        .main-container {-->
<!--          display: flex;-->
<!--          justify-content: space-between;-->
<!--          align-items: flex-start;-->
<!--        }-->

<!--        .left-section {-->
<!--          flex: 3;-->
<!--        }-->

<!--        .right-section {-->
<!--          flex: 1;-->
<!--          padding-left: 30px;-->
<!--        }-->

<!--        h1 {-->
<!--          text-align: center;-->
<!--        }-->

<!--        .search-container {-->
<!--          margin-bottom: 20px;-->
<!--          text-align: center;-->
<!--        }-->

<!--        input[type="text"] {-->
<!--          padding: 10px;-->
<!--          width: 300px;-->
<!--          font-size: 16px;-->
<!--        }-->

<!--        .blog-grid {-->
<!--          display: flex;-->
<!--          flex-wrap: wrap;-->
<!--          justify-content: center;-->
<!--          gap: 20px;-->
<!--        }-->

<!--        .card {-->
<!--          background: white;-->
<!--          padding: 20px;-->
<!--          border-radius: 10px;-->
<!--          box-shadow: 0 2px 8px rgba(0,0,0,0.1);-->
<!--          width: 250px;-->
<!--          text-align: left;-->
<!--          cursor: pointer;-->
<!--          transition: transform 0.2s ease, box-shadow 0.2s ease;-->
<!--        }-->

<!--        .card:hover,-->
<!--        .card:active {-->
<!--          transform: translateY(-5px) scale(1.02);-->
<!--          box-shadow: 0 8px 16px rgba(0,0,0,0.2);-->
<!--        }-->

<!--        .card h3 {-->
<!--          margin: 0;-->
<!--        }-->

<!--        .action-box {-->
<!--          background: #fff;-->
<!--          padding: 20px;-->
<!--          border-radius: 10px;-->
<!--          box-shadow: 0 2px 8px rgba(0,0,0,0.1);-->
<!--          text-align: center;-->
<!--        }-->

<!--        .action-box button {-->
<!--          background-color: #4B0082;-->
<!--          color: white;-->
<!--          padding: 10px 20px;-->
<!--          border: none;-->
<!--          border-radius: 5px;-->
<!--          font-size: 16px;-->
<!--          cursor: pointer;-->
<!--        }-->

<!--        .action-box p {-->
<!--          margin-bottom: 15px;-->
<!--        }-->
<!--    </style>-->
<!--</head>-->
<!--<body>-->

<!--<h1>All Blogs</h1>-->

<!--<div class="main-container">-->

<!--    &lt;!&ndash; Left Side: Blogs &ndash;&gt;-->
<!--    <div class="left-section">-->
<!--        <div class="search-container">-->
<!--            <input type="text" id="searchInput" placeholder="Search by title..." onkeyup="filterBlogs()">-->
<!--        </div>-->

<!--        <div class="blog-grid" id="blogGrid">-->
<!--            &lt;!&ndash; Blog cards injected here &ndash;&gt;-->
<!--        </div>-->
<!--    </div>-->

<!--    &lt;!&ndash; Right Side: Create Blog / Login &ndash;&gt;-->
<!--    <div class="right-section">-->
<!--        <div class="action-box" id="actionBox">-->
<!--            &lt;!&ndash; Filled by JS &ndash;&gt;-->
<!--        </div>-->
<!--    </div>-->

<!--</div>-->

<!--<script>-->
<!--    let blogs = [];-->

<!--    async function loadBlogs() {-->
<!--      const res = await fetch("http://localhost:9090/getallblogs");-->
<!--      blogs = await res.json();-->
<!--      displayBlogs(blogs);-->
<!--    }-->

<!--    function displayBlogs(list) {-->
<!--      const grid = document.getElementById("blogGrid");-->
<!--      grid.innerHTML = "";-->
<!--      list.forEach(blog => {-->
<!--        const card = document.createElement("div");-->
<!--        card.className = "card";-->
<!--        card.onclick = () => {-->
<!--          window.location.href = `/blog_view.html?title=${encodeURIComponent(blog.title)}`;-->
<!--        };-->
<!--        card.innerHTML = `-->
<!--          <h3><b>${blog.title}</b></h3>-->
<!--          <p>${blog.content.slice(0, 60)}...</p>-->
<!--          <p style="color: gray">${blog.blog_words}</p>-->
<!--          <small>blog by ${blog.name}</small>-->
<!--        `;-->
<!--        grid.appendChild(card);-->
<!--      });-->
<!--    }-->

<!--    function filterBlogs() {-->
<!--      const input = document.getElementById("searchInput").value.toLowerCase();-->
<!--      const filtered = blogs.filter(blog => blog.title.toLowerCase().includes(input));-->
<!--      displayBlogs(filtered);-->
<!--    }-->

<!--    function setupActionBox() {-->
<!--      const email = sessionStorage.getItem('userEmail');-->
<!--      const actionBox = document.getElementById("actionBox");-->

<!--      if (email) {-->
<!--        actionBox.innerHTML = `-->
<!--          <p>Welcome, <b>${email}</b></p>-->
<!--          <button onclick="window.location.href='blog_add.html'">Create Blog</button>-->
<!--        `;-->
<!--      } else {-->
<!--        actionBox.innerHTML = `-->
<!--          <p>To create your own blogs</p>-->
<!--          <button onclick="window.location.href='login.html'">Login</button>-->
<!--        `;-->
<!--      }-->
<!--    }-->

<!--    loadBlogs();-->
<!--    setupActionBox();-->
<!--</script>-->
<!--</body>-->
<!--</html>-->

<!DOCTYPE html>
<html>
<head>
    <title>Blog List</title>
    <style>
        body {
          font-family: Arial;
          background: #f4f4f4;
          margin: 0;
          padding: 20px;
        }

        .main-container {
          display: flex;
          justify-content: space-between;
          align-items: flex-start;
        }

        .left-section {
          flex: 3;
        }

        .right-section {
          flex: 1;
          padding-left: 30px;
        }

        h1 {
          text-align: center;
        }

        .search-container {
          margin-bottom: 20px;
          text-align: center;
        }

        input[type="text"] {
          padding: 10px;
          width: 300px;
          font-size: 16px;
        }

        .blog-grid {
          display: flex;
          flex-wrap: wrap;
          justify-content: center;
          gap: 20px;
        }

        .card {
          background: white;
          padding: 20px;
          border-radius: 10px;
          box-shadow: 0 2px 8px rgba(0,0,0,0.1);
          width: 250px;
          text-align: left;
          cursor: pointer;
          transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .card:hover,
        .card:active {
          transform: translateY(-5px) scale(1.02);
          box-shadow: 0 8px 16px rgba(0,0,0,0.2);
        }

        .card h3 {
          margin: 0;
        }

        .action-box {
          background: #fff;
          padding: 20px;
          border-radius: 10px;
          box-shadow: 0 2px 8px rgba(0,0,0,0.1);
          text-align: center;
        }

        .action-box button {
          background-color: #4B0082;
          color: white;
          padding: 10px 20px;
          border: none;
          border-radius: 5px;
          font-size: 16px;
          cursor: pointer;
        }

        .action-box p {
          margin-bottom: 15px;
        }

        .pagination {
          text-align: center;
          margin-top: 20px;
        }

        .pagination button {
          padding: 8px 12px;
          margin: 2px;
          background-color: #4B0082;
          color: white;
          border: none;
          border-radius: 4px;
          cursor: pointer;
        }

        .pagination button.disabled {
          background-color: #ccc;
          cursor: not-allowed;
        }

        .pagination button.active {
          background-color: #6a0dad;
          font-weight: bold;
        }
    </style>
</head>
<body>

<h1>All Blogs</h1>

<div class="main-container">

    <!-- Left Side: Blogs -->
    <div class="left-section">
        <div class="search-container">
            <input type="text" id="searchInput" placeholder="Search by title..." onkeyup="filterBlogs()">
        </div>

        <div class="blog-grid" id="blogGrid">
            <!-- Blog cards injected here -->
        </div>

        <div class="pagination" id="paginationControls">
            <!-- Pagination buttons injected here -->
        </div>
    </div>

    <!-- Right Side: Create Blog / Login -->
    <div class="right-section">
        <div class="action-box" id="actionBox">
            <!-- Filled by JS -->
        </div>
    </div>

</div>

<script>
    let blogs = [];
    let currentPage = 1;
    const blogsPerPage = 8;
    let filteredBlogs = [];

    async function loadBlogs() {
      const res = await fetch("http://localhost:9090/getallblogs");
      blogs = await res.json();
      filteredBlogs = blogs;
      renderPage(1);
    }

    function renderPage(page) {
      currentPage = page;
      const start = (page - 1) * blogsPerPage;
      const end = start + blogsPerPage;
      const paginatedBlogs = filteredBlogs.slice(start, end);
      displayBlogs(paginatedBlogs);
      renderPagination(filteredBlogs.length);
    }

    function displayBlogs(list) {
      const grid = document.getElementById("blogGrid");
      grid.innerHTML = "";
      list.forEach(blog => {
        const card = document.createElement("div");
        card.className = "card";
        card.onclick = () => {
          window.location.href = `/blog_view.html?title=${encodeURIComponent(blog.title)}`;
        };
        card.innerHTML = `
          <h3><b>${blog.title}</b></h3>
          <p>${blog.content.slice(0, 60)}...</p>
          <p style="color: gray">${blog.blog_words}</p>
          <small>blog by ${blog.name}</small>
        `;
        grid.appendChild(card);
      });
    }

    function renderPagination(totalBlogs) {
      const pageCount = Math.ceil(totalBlogs / blogsPerPage);
      const pagination = document.getElementById("paginationControls");
      pagination.innerHTML = "";

      const prevBtn = document.createElement("button");
      prevBtn.innerText = "Prev";
      prevBtn.onclick = () => renderPage(currentPage - 1);
      prevBtn.className = currentPage === 1 ? "disabled" : "";
      pagination.appendChild(prevBtn);

      for (let i = 1; i <= pageCount; i++) {
        const pageBtn = document.createElement("button");
        pageBtn.innerText = i;
        pageBtn.className = i === currentPage ? "active" : "";
        pageBtn.onclick = () => renderPage(i);
        pagination.appendChild(pageBtn);
      }

      const nextBtn = document.createElement("button");
      nextBtn.innerText = "Next";
      nextBtn.onclick = () => renderPage(currentPage + 1);
      nextBtn.className = currentPage === pageCount ? "disabled" : "";
      pagination.appendChild(nextBtn);
    }

    function filterBlogs() {
      const input = document.getElementById("searchInput").value.toLowerCase();
      filteredBlogs = blogs.filter(blog =>
        blog.title.toLowerCase().includes(input)
      );
      renderPage(1);
    }

    function setupActionBox() {
      const email = sessionStorage.getItem('userEmail');
      const actionBox = document.getElementById("actionBox");

      if (email) {
        actionBox.innerHTML = `
          <p>Welcome, <b>${email}</b></p>
          <button onclick="window.location.href='blog_add.html'">Create Blog</button>
        `;
      } else {
        actionBox.innerHTML = `
          <p>To create your own blogs</p>
          <button onclick="window.location.href='login.html'">Login</button>
        `;
      }
    }

    loadBlogs();
    setupActionBox();
</script>

</body>
</html>

